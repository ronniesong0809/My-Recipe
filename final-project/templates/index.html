{% extends "layout.html" %} {% block content %}

<div style="text-align: center;">

	<form style="display: inline" action="{{ url_for('home') }}" method="get">
		<button onclick="myFunction();" style="text-decoration: none">Go back to home</button>
	</form>

	<form style="display: inline" action="{{ url_for('add') }}" method="get">
		<button onclick="myFunction();" style="text-decoration: none">Add a new recipe</button>
	</form>

	<form style="display: inline" action="{{ url_for('remove') }}" method="get">
		<button onclick="myFunction();" style="text-decoration: none">Remove an exist recipe</button>
	</form>
	<br>

</div>

<div id="complex" style="display: none">
	<button onclick="myFunction();" style="text-decoration: none">Show Original Table</button> {% for rp in rps %}
	<p class=rp>
		<div class="card">

			<div style="text-align: center;">
				<img src="{{ rp.url }}" alt="Avatar" style="width:50%;" align="middle">
				<p>Labels: {{ rp.url_description }}</p>
			</div>

			<div class="container">

				<table>
					<tr>
						<th style="width:10%"><b>Elements</b></th>
						<th style="width:33.33%"><b>Original Text</b></th>
						<th style="width:33.33%"><b>Language 1</b></th>
						<th style="width:33.33%"><b>Language 2</b></th>
					</tr>
					<tr>
						<td><b>Title: </b></td>
						<td>{{ rp.title }}</td>
						<td>{{ rp.t_title }}</td>
						<td>{{ rp.t2_title }}</td>
					</tr>
					<tr>
						<td><b>Author: </b></td>
						<td>{{ rp.author }}</td>
						<td>{{ rp.t_author }}</td>
						<td>{{ rp.t2_author }}</td>
					</tr>
					<tr>
						<td><b>Ingredient List: </b></td>
						<td>{{ rp.ingredient }}</td>
						<td>{{ rp.t_ingredient }}</td>
						<td>{{ rp.t2_ingredient }}</td>
					</tr>
					<tr>
						<td><b>Amount of Time: </b></td>
						<td>{{ rp.time }}</td>
						<td>{{ rp.t_time }}</td>
						<td>{{ rp.t2_time }}</td>
					</tr>
					<tr>
						<td><b>Skill Level: </b></td>
						<td>{{ rp.skill }}</td>
						<td>{{ rp.t_skill }}</td>
						<td>{{ rp.t2_skill }}</td>
					</tr>
					<tr>
						<td><b>Description: </b></td>
						<td>{{ rp.description }}</td>
						<td>{{ rp.t_description }}</td>
						<td>{{ rp.t2_description }}</td>
					</tr>
				</table>
			</div>

			<div id="nutritionix">
				<br>
				<h2>Nutrients:</h2>
				<table width="60%">
					<tr>
						<th></th>
						<th>Qty</th>
						<th>Unit</th>
						<th>Food</th>
						<th>Calories</th>
						<th>Weight</th>
					</tr>
					{% for obj in rp.nutrition.foods %}
					<tr>
						<td style="text-align: center;"><img src='{{obj.photo.thumb}}' alt='{{obj.photo.food_name}}'></td>
						<td> {{obj.serving_qty}} </td>
						<td> {{obj.serving_unit}} </td>
						<td> {{obj.food_name}} </td>
						<td> {{obj.nf_calories}} kcal</td>
						<td> {{obj.serving_weight_grams}} g</td>
					</tr>
					{% endfor %}
					<!--<tbody id="table"></tbody>-->
				</table>
				<script>
					var obj = {{rp.nutrition | tojson}};
					var x = '';
					for (var i in obj.foods) {
						x += "<tr><td><img src='" + obj.foods[i].photo.thumb + "'></td>" +
							"<td>" + obj.foods[i].serving_qty + "</td>" +
							"<td>" + obj.foods[i].serving_unit + "</td>" +
							"<td>" + obj.foods[i].food_name + "</td>" +
							"<td>" + obj.foods[i].nf_calories + " kcal</td>" +
							"<td>" + obj.foods[i].serving_weight_grams + " g</td></tr>";
					}
					document.getElementById("table").innerHTML = x;
				</script>
			</div>

			<div id="yelp">
				<br>
				<h2>Yelp</h2>
				<h6>If you don't want to make it yourself, you can try this recipe at the following restaurants:</h6>
				
				{% for obj in rp.yelp.businesses %}
				<table width="60%">				    
					<!--<td style="width:50%;text-align: center;">
						Name: {{ rp.yelp.businesses[0].name }}
						<img src="{{ rp.yelp.businesses[0].image_url }}" alt="Avatar" style="width:80%;">
					</td>
					<td style="width:50%">
						<table>
							<tr>
								<td>Reviews: </td>
								<td> {{ rp.yelp.businesses[0].review_count }} </td>
							</tr>
							<tr>
								<td>Rating: </td>
								<td> {{ rp.yelp.businesses[0].rating }} stars</td>
							</tr>
							<tr>
								<td>Categories: </td>
								<td> {{ rp.yelp.businesses[0].categories }} </td>
							</tr>
							<tr>
								<td>Location: </td>
								<td> {{ rp.yelp.businesses[0].location.address1 }} {{ rp.yelp.businesses[0].location.city }} {{ rp.yelp.businesses[0].location.state }} {{ rp.yelp.businesses[0].location.zip_code }}</td>
							</tr>
							<tr>
								<td>Price: </td>
								<td> {{ rp.yelp.businesses[0].price }}</td>
							</tr>
							<tr>
								<td>More info</td>
								<td> <a href="{{ rp.yelp.businesses[0].url }}">Here</a></td>
							</tr>
						</table>
					</td>-->
					<td style="width:50%;text-align: center;">
						<h3><b> {{ obj.name }} </b></h3>
						<h5> {{ obj.rating }} stars from {{ obj.review_count }} reviews</h5> 
						<img src="{{ obj.image_url }}" alt="Avatar" style="height:20%">
					</td>
					<td style="width:50%">
						<table>
							<tr>
								<td> Price: </td>
								<td> {{ obj.price }} </td>
							</tr>
							<tr>
								<td> Categories: </td>
								<td>
								{% for x in obj.categories %}
								    {{ x.title }}, 
								{% endfor %}
								</td>
							</tr>
							<tr>
								<td> Location: </td>
								<td> {{ obj.location.address1 }} {{ obj.location.city }} {{ obj.location.state }}, {{ obj.location.zip_code }}</td>
							</tr>
							<tr>
								<td> Phone: </td>
								<td> {{ obj.phone }}</td>
							</tr>
							<tr>
								<td>More:</td>
								<td> <a href="{{ obj.url }}">Here</a></td>
							</tr>
						</table>
					</td>					
				</table>
				{% endfor %}
			</div>

		</div>
	</p>

	{% endfor %}
</div>

<div id="simple">

	<button onclick="myFunction();" style="text-decoration: none">Show Complex Table</button> {% for rp in rps %}
	<p class=rp>
		<div class="card">

			<div style="text-align: center;">
				<img src="{{ rp.url }}" alt="Avatar" style="width:50%;" align="middle">
			</div>

			<div class="container">

				<table>
					<tr>
						<th><b>Elements</b></td>
							<th><b>Original Text</b></th>
					</tr>
					<tr>
						<td><b>Title: </b></td>
						<td>{{ rp.title }}</td>
					</tr>
					<tr>
						<td><b>Author: </b></td>
						<td>{{ rp.author }}</td>
					</tr>
					<tr>
						<td><b>Ingredient List: </b></td>
						<td>{{ rp.ingredient }}</td>
					</tr>
					<tr>
						<td><b>Amount of Time: </b></td>
						<td>{{ rp.time }}</td>
					</tr>
					<tr>
						<td><b>Skill Level: </b></td>
						<td>{{ rp.skill }}</td>
					</tr>
					<tr>
						<td><b>Description: </b></td>
						<td>{{ rp.description }}</td>
					</tr>
				</table>
			</div>
		</div>
	</p>
	{% endfor %}
</div>

<script>
	function myFunction() {
		var x = document.getElementById("complex");
		var y = document.getElementById("simple");
		if (x.style.display === "none") {
			x.style.display = "block";
			y.style.display = "none";
		} else {
			x.style.display = "none";
			y.style.display = "block";
		}
	}
</script>

{% endblock %}